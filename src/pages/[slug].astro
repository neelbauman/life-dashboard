---
import { getCollection } from 'astro:content';
// メインのレイアウトを再利用します
import Layout from '../layouts/Layout.astro';

// 1. getStaticPaths を定義し、'items' コレクションからページを生成
export async function getStaticPaths() {
  const items = await getCollection('items');
  return items.map(item => ({
    params: { slug: item.slug },
    props: { item }, // 2. ページに item オブジェクト全体を渡す
  }));
}

// 3. props から item を受け取る
const { item } = Astro.props;
// Markdown の本文をレンダリングする準備
const { Content } = await item.render();
---
<Layout>
  <h1>{item.data.name}</h1>
  <ul>
    <li><strong>価格:</strong> {item.data.price.toLocaleString()} 円</li>
    <li><strong>ステータス:</strong> {item.data.status}</li>
    <li><strong>カテゴリ:</strong> {item.data.category}</li>
  </ul>
  
  <hr />

  <Content />

  <br />
  <a href={import.meta.env.BASE_URL}>ダッシュボードに戻る</a>
</Layout>
